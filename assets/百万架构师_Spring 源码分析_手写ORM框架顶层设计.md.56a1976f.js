import{_ as s,o as n,h as a,Q as l}from"./chunks/framework.da611722.js";const p="/assets/ORM框架的设计图解.d4deeaa0.png",m=JSON.parse('{"title":"手写ORM框架顶层设计 | JavaGuide","description":"","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://javaguide.net/百万架构师/Spring 源码分析/手写ORM框架顶层设计.html"}],["meta",{"name":"keywords","content":"手写ORM框架顶层设计 , JavaGuide , JavaGuide官网, Java面试指南, Java基础, 多线程, JVM, 虚拟机, 数据库, MySQL, Spring, Redis, MyBatis, 系统设计, 分布式, RPC, 高可用, 高并发"}],["meta",{"name":"og:url","content":"https://JavaGuide.net"}],["meta",{"name":"og:type","content":"website"}],["meta",{"name":"og:image","content":"https://javaguide.net/JavaGuide-og.png"}],["meta",{"name":"og:title","content":"手写ORM框架顶层设计 | JavaGuide | Java面试指南 | JavaGuide官网"}],["meta",{"name":"og:description","content":"手写ORM框架顶层设计 | JavaGuide | Java面试指南 | JavaGuide官网 | 「JavaGuide.net」一份涵盖大部分 Java 程序员所需要掌握的核心知识。准备 Java 面试，首选 JavaGuide.net ！"}],["meta",{"name":"twitter:site","content":"https://javaguide.net"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:creator","content":"nogeek.cn"}],["meta",{"name":"twitter:title","content":"手写ORM框架顶层设计 | JavaGuide | Java面试指南 | JavaGuide官网"}],["meta",{"name":"twitter:description","content":"手写ORM框架顶层设计 | JavaGuide | Java面试指南 | JavaGuide官网 | 「JavaGuide.net」一份涵盖大部分 Java 程序员所需要掌握的核心知识。准备 Java 面试，首选 JavaGuide.net ！"}],["meta",{"name":"twitter:image","content":"https://javaguide.net/JavaGuide-og.png"}],["meta",{"name":"sogou_site_verification","content":"fcAkazTXFd"}],["meta",{"name":"baidu-site-verification","content":"codeva-MXEPYsXKGk"}],["meta",{"name":"msvalidate.01","content":"9F2D57CFC59E8031212A166878638B15"}]]},"headers":[],"relativePath":"百万架构师/Spring 源码分析/手写ORM框架顶层设计.md","filePath":"百万架构师/Spring 源码分析/手写ORM框架顶层设计.md","lastUpdated":1741277271000}'),e={name:"百万架构师/Spring 源码分析/手写ORM框架顶层设计.md"},o=l('<h2 id="orm-对象关系-object-relation-mapping" tabindex="-1">ORM ( 对象关系 Object Relation Mapping ) <a class="header-anchor" href="#orm-对象关系-object-relation-mapping" aria-label="Permalink to &quot;ORM  ( 对象关系 Object Relation Mapping )&quot;">​</a></h2><p>用 Java 对象来描述对象与对象之间的关系和数据内容</p><h2 id="hibernate-mybatis-jpa-springjdbc-对比" tabindex="-1">Hibernate Mybatis JPA SpringJDBC 对比 <a class="header-anchor" href="#hibernate-mybatis-jpa-springjdbc-对比" aria-label="Permalink to &quot;Hibernate Mybatis JPA SpringJDBC 对比&quot;">​</a></h2><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>Hibernate</td><td>全自动挡</td><td>不需要写一句SQL语句、烧油（牺牲性能）</td></tr><tr><td>MyBatis</td><td>手自一体（半自动）</td><td>支持单表映射，多表关联需要配置，轻量级一些</td></tr><tr><td>SpringJDBC</td><td>手动挡</td><td>包括SQL语句，映射都是要自己实现的（最省油的）</td></tr></tbody></table><p>喜欢轻装上阵 <strong>Spring</strong> 本来就是 <strong>万能胶</strong> <code>IOC</code> / <code>AOP</code> / <code>DI</code> / <code>MVC</code> / <code>JDBC</code> / <code>BigData</code> / <code>Cloud</code> / <code>Boot</code></p><p>因为 <strong>Spring</strong> 形成一个 <strong>生态</strong></p><h2 id="为什么要自己写-orm-框架" tabindex="-1">为什么要自己写 ORM 框架？ <a class="header-anchor" href="#为什么要自己写-orm-框架" aria-label="Permalink to &quot;为什么要自己写 ORM 框架？&quot;">​</a></h2><ul><li>1、解决实际的业务问题（根据业务需要）</li><li>2、自定义需求，如果要直接第三方开源框架的话，需要进行二次开发</li><li>3、解决团队成员之间水平参差不齐的问题</li><li>4、可以实现统一的管理、监控、排错等一系列底层操作</li></ul><h3 id="实际业务需要" tabindex="-1">实际业务需要： <a class="header-anchor" href="#实际业务需要" aria-label="Permalink to &quot;实际业务需要：&quot;">​</a></h3><ul><li>大数据监测系统：</li><li>数据吞吐量大</li><li>数据存储方式多样化</li><li>数据源需要频繁切换</li><li>API无法统一</li></ul><h3 id="orm-框架的设计图解" tabindex="-1">ORM 框架的设计图解： <a class="header-anchor" href="#orm-框架的设计图解" aria-label="Permalink to &quot;ORM 框架的设计图解：&quot;">​</a></h3><p><img src="'+p+`" alt="ORM框架的设计图解"></p><h3 id="最底层的类" tabindex="-1">最底层的类 <a class="header-anchor" href="#最底层的类" aria-label="Permalink to &quot;最底层的类&quot;">​</a></h3><h3 id="_1、统一方法名" tabindex="-1">1、统一方法名 <a class="header-anchor" href="#_1、统一方法名" aria-label="Permalink to &quot;1、统一方法名&quot;">​</a></h3><ul><li><strong>select</strong></li><li><strong>insert</strong></li><li><strong>delete</strong></li><li><strong>update</strong></li></ul><p>find / get / load / query</p><p>//约定</p><p>如果是删、改，以ID作为唯一的检索条件，如果没有ID，那么要先查出来得到ID</p><h3 id="_2、统一参数" tabindex="-1">2、统一参数 <a class="header-anchor" href="#_2、统一参数" aria-label="Permalink to &quot;2、统一参数&quot;">​</a></h3><ul><li>如果是做条件查询 <strong><code>QueryRule</code></strong>（自己封装）</li><li>批量更新和插入 ，方法名以All结尾 参数为List</li><li>删、改、插一条数据 ，参数用 T</li></ul><h3 id="_3、统一返回结果-所有的分页操作返回-page" tabindex="-1">3、统一返回结果：所有的分页操作返回 <strong><code>Page</code></strong> <a class="header-anchor" href="#_3、统一返回结果-所有的分页操作返回-page" aria-label="Permalink to &quot;3、统一返回结果：所有的分页操作返回 **\`Page\`**&quot;">​</a></h3><ul><li><p>所有的集合查询返回 <strong><code>List</code></strong></p></li><li><p>所有的单条查询返回 <strong><code>T</code></strong></p></li><li><p>所有的ID采用 <strong><code>Long</code></strong> 类型</p></li><li><p>所有的删除、修改、增加操作返回 <strong>boolean</strong></p></li></ul><p>对外输出都用 <strong><code>ResultMsg</code></strong></p><p>java extends core common</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><code>javax.core.common.utils</code></td><td>操作工具包</td></tr><tr><td><code>javax.core.common.config</code></td><td>统一配置</td></tr><tr><td><code>javax.core.common.doc</code></td><td>文档生成</td></tr><tr><td><code>javax.core.common.jdbc</code></td><td>JDBC依赖</td></tr><tr><td><code>javax.core.common.redis</code></td><td>Redis</td></tr><tr><td><code>javax.core.common.mongodb</code></td><td>MongoDB</td></tr><tr><td><code>javax.core.common.hbase</code></td><td>Hbase</td></tr></tbody></table><p>只要是Spring相关的配置都以 application- 开头</p><p>建议不要把所有的东西放在一个文件中，这样不便于开发团队的维护</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><code>aop</code></td><td>配置切面，代理规则的</td></tr><tr><td><code>beans</code></td><td>配置单例对象的</td></tr><tr><td><code>common</code></td><td>配置通用的配置</td></tr><tr><td><code>context</code></td><td>主入口</td></tr><tr><td><code>db</code></td><td>数据库相关</td></tr><tr><td><code>web</code></td><td>跟页面打交道的：拦截器、过滤器、监听器、模板</td></tr></tbody></table><h3 id="jdbc-例子" tabindex="-1">JDBC 例子 <a class="header-anchor" href="#jdbc-例子" aria-label="Permalink to &quot;JDBC 例子&quot;">​</a></h3><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> com.darian.spring.orm.demo.model.Member;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> javax.persistence.Table;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> java.lang.reflect.Field;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> java.sql.Connection;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> java.sql.DriverManager;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> java.sql.PreparedStatement;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> java.sql.ResultSet;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> java.util.ArrayList;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> java.util.Arrays;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * Created by Tom on 2018/5/9.</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">JdbcTest</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] </span><span style="color:#FFAB70;">args</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//        List&lt;?&gt; result = select(Member.class);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Member condition </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Member</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        condition.</span><span style="color:#B392F0;">setName</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;tom&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">//        condition.setAge(20);</span></span>
<span class="line"><span style="color:#E1E4E8;">        List&lt;</span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">&gt; result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">select</span><span style="color:#E1E4E8;">(condition);</span></span>
<span class="line"><span style="color:#E1E4E8;">        System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(Arrays.</span><span style="color:#B392F0;">toString</span><span style="color:#E1E4E8;">(result.</span><span style="color:#B392F0;">toArray</span><span style="color:#E1E4E8;">()));</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//我框架问世的时候，你的Member类都还没有从石头缝里蹦出来</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> List&lt;</span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">&gt; </span><span style="color:#B392F0;">select</span><span style="color:#E1E4E8;">(Object </span><span style="color:#FFAB70;">condition</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">            Class&lt;</span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">&gt; entityClass </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> condition.</span><span style="color:#B392F0;">getClass</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//1、加载驱动类</span></span>
<span class="line"><span style="color:#E1E4E8;">            Class.</span><span style="color:#B392F0;">forName</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;com.mysql.jdbc.Driver&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//2、建立连接</span></span>
<span class="line"><span style="color:#E1E4E8;">            Connection conn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> DriverManager.</span><span style="color:#B392F0;">getConnection</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;jdbc:mysql://127.0.0.1:3306/gupaoedu_demo?characterEncoding=UTF-8&amp;rewriteBatchedStatements=true&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;root&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;123456&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">            Table table </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> entityClass.</span><span style="color:#B392F0;">getAnnotation</span><span style="color:#E1E4E8;">(Table.class);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//3、创建语句开始事务</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//为了简便，暂时用select * from 代替，不要说我不严谨，OK？</span></span>
<span class="line"><span style="color:#E1E4E8;">            String sql </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;select * from &quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> table.</span><span style="color:#B392F0;">name</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">            StringBuffer where </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">StringBuffer</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; where 1=1 &quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">Field</span><span style="color:#E1E4E8;">[] fields </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> entityClass.</span><span style="color:#B392F0;">getDeclaredFields</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (Field field </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> fields) {</span></span>
<span class="line"><span style="color:#E1E4E8;">                field.</span><span style="color:#B392F0;">setAccessible</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">                Object value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> field.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(condition);</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> value) {</span></span>
<span class="line"><span style="color:#E1E4E8;">                    Class&lt;</span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">&gt; clazz </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> field.</span><span style="color:#B392F0;">getType</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(String.class </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> clazz){</span></span>
<span class="line"><span style="color:#E1E4E8;">                        where.</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; and &quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> field.</span><span style="color:#B392F0;">getName</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot; = &#39;&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> value </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;&#39;&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">                    }</span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">                        where.</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; and &quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> field.</span><span style="color:#B392F0;">getName</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot; = &quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> value);</span></span>
<span class="line"><span style="color:#E1E4E8;">                    }</span></span>
<span class="line"><span style="color:#E1E4E8;">                }</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">            System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(sql </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> where.</span><span style="color:#B392F0;">toString</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">            PreparedStatement pstmt </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> conn.</span><span style="color:#B392F0;">prepareStatement</span><span style="color:#E1E4E8;">(sql </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> where.</span><span style="color:#B392F0;">toString</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//4、执行语句集</span></span>
<span class="line"><span style="color:#E1E4E8;">            ResultSet rs </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> pstmt.</span><span style="color:#B392F0;">executeQuery</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//5、获取结果集</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//数据表中的记录要复制到Java的Object中</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//反射机制</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//自动赋值</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//拿到一共有多少个列</span></span>
<span class="line"><span style="color:#E1E4E8;">            List&lt;</span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> ArrayList&lt;</span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> columnCount </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> rs.</span><span style="color:#B392F0;">getMetaData</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">getColumnCount</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (rs.</span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">()){ </span><span style="color:#6A737D;">//游标</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;">//===========Begin ORM ============</span></span>
<span class="line"><span style="color:#E1E4E8;">                Object instance </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> entityClass.</span><span style="color:#B392F0;">newInstance</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">; i </span><span style="color:#F97583;">&lt;=</span><span style="color:#E1E4E8;"> columnCount; i </span><span style="color:#F97583;">++</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">                    String columnName </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> rs.</span><span style="color:#B392F0;">getMetaData</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">getColumnName</span><span style="color:#E1E4E8;">(i);</span></span>
<span class="line"><span style="color:#E1E4E8;">                    Field field </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> entityClass.</span><span style="color:#B392F0;">getDeclaredField</span><span style="color:#E1E4E8;">(columnName);</span></span>
<span class="line"><span style="color:#E1E4E8;">                    field.</span><span style="color:#B392F0;">setAccessible</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;">//数据类型映射非常关键</span></span>
<span class="line"><span style="color:#6A737D;">//                    Object type = field.getType();</span></span>
<span class="line"><span style="color:#6A737D;">//                    if(type == Long.class){</span></span>
<span class="line"><span style="color:#6A737D;">//                        field.set(instance,rs.getLong(columnName));</span></span>
<span class="line"><span style="color:#6A737D;">//                    }else if(String.class == type){</span></span>
<span class="line"><span style="color:#6A737D;">//                        field.set(instance,rs.getString(columnName));</span></span>
<span class="line"><span style="color:#6A737D;">//                    }else if(Integer.class == type){</span></span>
<span class="line"><span style="color:#6A737D;">//                        field.set(instance,rs.getInt(columnName));</span></span>
<span class="line"><span style="color:#6A737D;">//                    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">                    field.</span><span style="color:#B392F0;">set</span><span style="color:#E1E4E8;">(instance,rs.</span><span style="color:#B392F0;">getObject</span><span style="color:#E1E4E8;">(columnName));</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;">//各自的厂商实现自己的链接</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;">//MySQL为例,以下类型Java语言中是不存在的</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;">//bigint ，由开发厂商自动映射好了</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;">//varchar</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;">//int</span></span>
<span class="line"><span style="color:#6A737D;">//                    System.out.println(rs.getObject(columnName).getClass());</span></span>
<span class="line"><span style="color:#E1E4E8;">                }</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;">//===========End ORM ==============</span></span>
<span class="line"><span style="color:#E1E4E8;">                result.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(instance);</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//System.out.println(Arrays.toString(result.toArray()));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//6、关闭结果集、关闭语句集、关闭连接</span></span>
<span class="line"><span style="color:#E1E4E8;">            rs.</span><span style="color:#B392F0;">close</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">            pstmt.</span><span style="color:#B392F0;">close</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">            conn.</span><span style="color:#B392F0;">close</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;">  result;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;">(Exception </span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">            e.</span><span style="color:#B392F0;">printStackTrace</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span><span style="color:#F97583;">finally</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//关闭资源要在Finally块中</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> com.darian.spring.orm.demo.model.Member;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> javax.persistence.Table;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> java.lang.reflect.Field;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> java.sql.Connection;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> java.sql.DriverManager;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> java.sql.PreparedStatement;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> java.sql.ResultSet;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> java.util.ArrayList;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> java.util.Arrays;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * Created by Tom on 2018/5/9.</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JdbcTest</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//        List&lt;?&gt; result = select(Member.class);</span></span>
<span class="line"><span style="color:#24292E;">        Member condition </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Member</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        condition.</span><span style="color:#6F42C1;">setName</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;tom&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">//        condition.setAge(20);</span></span>
<span class="line"><span style="color:#24292E;">        List&lt;</span><span style="color:#D73A49;">?</span><span style="color:#24292E;">&gt; result </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">select</span><span style="color:#24292E;">(condition);</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(Arrays.</span><span style="color:#6F42C1;">toString</span><span style="color:#24292E;">(result.</span><span style="color:#6F42C1;">toArray</span><span style="color:#24292E;">()));</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//我框架问世的时候，你的Member类都还没有从石头缝里蹦出来</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">?</span><span style="color:#24292E;">&gt; </span><span style="color:#6F42C1;">select</span><span style="color:#24292E;">(Object </span><span style="color:#E36209;">condition</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">try</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">            Class&lt;</span><span style="color:#D73A49;">?</span><span style="color:#24292E;">&gt; entityClass </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> condition.</span><span style="color:#6F42C1;">getClass</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//1、加载驱动类</span></span>
<span class="line"><span style="color:#24292E;">            Class.</span><span style="color:#6F42C1;">forName</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;com.mysql.jdbc.Driver&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//2、建立连接</span></span>
<span class="line"><span style="color:#24292E;">            Connection conn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> DriverManager.</span><span style="color:#6F42C1;">getConnection</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;jdbc:mysql://127.0.0.1:3306/gupaoedu_demo?characterEncoding=UTF-8&amp;rewriteBatchedStatements=true&quot;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&quot;root&quot;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&quot;123456&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            Table table </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> entityClass.</span><span style="color:#6F42C1;">getAnnotation</span><span style="color:#24292E;">(Table.class);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//3、创建语句开始事务</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//为了简便，暂时用select * from 代替，不要说我不严谨，OK？</span></span>
<span class="line"><span style="color:#24292E;">            String sql </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;select * from &quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> table.</span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">            StringBuffer where </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">StringBuffer</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot; where 1=1 &quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">Field</span><span style="color:#24292E;">[] fields </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> entityClass.</span><span style="color:#6F42C1;">getDeclaredFields</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (Field field </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> fields) {</span></span>
<span class="line"><span style="color:#24292E;">                field.</span><span style="color:#6F42C1;">setAccessible</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">                Object value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> field.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(condition);</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">null</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> value) {</span></span>
<span class="line"><span style="color:#24292E;">                    Class&lt;</span><span style="color:#D73A49;">?</span><span style="color:#24292E;">&gt; clazz </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> field.</span><span style="color:#6F42C1;">getType</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(String.class </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> clazz){</span></span>
<span class="line"><span style="color:#24292E;">                        where.</span><span style="color:#6F42C1;">append</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot; and &quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> field.</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot; = &#39;&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> value </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;&#39;&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">                    }</span><span style="color:#D73A49;">else</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">                        where.</span><span style="color:#6F42C1;">append</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot; and &quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> field.</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot; = &quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> value);</span></span>
<span class="line"><span style="color:#24292E;">                    }</span></span>
<span class="line"><span style="color:#24292E;">                }</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(sql </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> where.</span><span style="color:#6F42C1;">toString</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">            PreparedStatement pstmt </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> conn.</span><span style="color:#6F42C1;">prepareStatement</span><span style="color:#24292E;">(sql </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> where.</span><span style="color:#6F42C1;">toString</span><span style="color:#24292E;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//4、执行语句集</span></span>
<span class="line"><span style="color:#24292E;">            ResultSet rs </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> pstmt.</span><span style="color:#6F42C1;">executeQuery</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//5、获取结果集</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//数据表中的记录要复制到Java的Object中</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//反射机制</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//自动赋值</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//拿到一共有多少个列</span></span>
<span class="line"><span style="color:#24292E;">            List&lt;</span><span style="color:#D73A49;">Object</span><span style="color:#24292E;">&gt; result </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayList&lt;</span><span style="color:#D73A49;">Object</span><span style="color:#24292E;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> columnCount </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> rs.</span><span style="color:#6F42C1;">getMetaData</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getColumnCount</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (rs.</span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">()){ </span><span style="color:#6A737D;">//游标</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6A737D;">//===========Begin ORM ============</span></span>
<span class="line"><span style="color:#24292E;">                Object instance </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> entityClass.</span><span style="color:#6F42C1;">newInstance</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;=</span><span style="color:#24292E;"> columnCount; i </span><span style="color:#D73A49;">++</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">                    String columnName </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> rs.</span><span style="color:#6F42C1;">getMetaData</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getColumnName</span><span style="color:#24292E;">(i);</span></span>
<span class="line"><span style="color:#24292E;">                    Field field </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> entityClass.</span><span style="color:#6F42C1;">getDeclaredField</span><span style="color:#24292E;">(columnName);</span></span>
<span class="line"><span style="color:#24292E;">                    field.</span><span style="color:#6F42C1;">setAccessible</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6A737D;">//数据类型映射非常关键</span></span>
<span class="line"><span style="color:#6A737D;">//                    Object type = field.getType();</span></span>
<span class="line"><span style="color:#6A737D;">//                    if(type == Long.class){</span></span>
<span class="line"><span style="color:#6A737D;">//                        field.set(instance,rs.getLong(columnName));</span></span>
<span class="line"><span style="color:#6A737D;">//                    }else if(String.class == type){</span></span>
<span class="line"><span style="color:#6A737D;">//                        field.set(instance,rs.getString(columnName));</span></span>
<span class="line"><span style="color:#6A737D;">//                    }else if(Integer.class == type){</span></span>
<span class="line"><span style="color:#6A737D;">//                        field.set(instance,rs.getInt(columnName));</span></span>
<span class="line"><span style="color:#6A737D;">//                    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">                    field.</span><span style="color:#6F42C1;">set</span><span style="color:#24292E;">(instance,rs.</span><span style="color:#6F42C1;">getObject</span><span style="color:#24292E;">(columnName));</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6A737D;">//各自的厂商实现自己的链接</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6A737D;">//MySQL为例,以下类型Java语言中是不存在的</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6A737D;">//bigint ，由开发厂商自动映射好了</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6A737D;">//varchar</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6A737D;">//int</span></span>
<span class="line"><span style="color:#6A737D;">//                    System.out.println(rs.getObject(columnName).getClass());</span></span>
<span class="line"><span style="color:#24292E;">                }</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6A737D;">//===========End ORM ==============</span></span>
<span class="line"><span style="color:#24292E;">                result.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(instance);</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//System.out.println(Arrays.toString(result.toArray()));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//6、关闭结果集、关闭语句集、关闭连接</span></span>
<span class="line"><span style="color:#24292E;">            rs.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">            pstmt.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">            conn.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">  result;</span></span>
<span class="line"><span style="color:#24292E;">        }</span><span style="color:#D73A49;">catch</span><span style="color:#24292E;">(Exception </span><span style="color:#E36209;">e</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">            e.</span><span style="color:#6F42C1;">printStackTrace</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        }</span><span style="color:#D73A49;">finally</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//关闭资源要在Finally块中</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br></div></div>`,30),t=[o];function r(c,E,y,i,d,b){return n(),a("div",null,t)}const F=s(e,[["render",r]]);export{m as __pageData,F as default};
