import{_ as s,o as n,h as a,Q as l}from"./chunks/framework.da611722.js";const p="/assets/JavaGuide_Nginx_初步认识_背景_F5.b5da6d83.png",o="/assets/JavaGuide_Nginx_初步认识_Nginx负载均衡.4d6c8a68.png",e="/assets/JavaGuide_Nginx_初步认识_http_server代理.1052dd50.png",r="/assets/JavaGuide_Nginx_初步认识_Nginx欢迎界面.5cd8f95e.png",c="/assets/JavaGuide_Nginx_初步认识_windows刷新DNS缓存.407abf85.png",t="/assets/JavaGuide_Nginx_初步认识_DNS_域名1.ad0cdcc6.png",E="/assets/JavaGuide_Nginx_初步认识_DNS_域名2.8458e306.png",y="/assets/JavaGuide_Nginx_初步认识_DNS_域名3.ef00707b.png",i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXIAAABQCAYAAAAEN/6AAAAJk0lEQVR4nO3dT2ga6RsH8G9+kdlWMcWSaZsNREEKS1oKuclchBSklz3YQ045efAigTm5lxx7+XkaCF5yyKknDzuHXBYhAS+SWyFsZCEIqbCb3Roaqmi7YnAPM8Y/MXY0M45jvh94waRvZt6JzeP4+r7PMwegBQt44zUslF/jT/Wo5zEREZlrDiYHclGp4eGtJyuiorzC5ZmZZyQiut9MD+QAgEAKy/JzVOQoqpIK//opzt8l0TD9RERE9D8rDiqsvYGrsI8qAOFpEPj0B4M4EZFFLAnkP4hBNMsFACF4XgRR/33PitMQERGsmlohIqKJseSOnIiIJoeBnIjI4RjIiYgcjoGciMjhGMiJiByOgZyIyOEYyImIHM7aQC6p8G+nIAx4vKLUrps/HrN0GOaLQVRqECW7x2GVEHzb3c+LWddr3+9NiKpY1v+/LUdDkx8AkYUsDeTd2/N7turnoyjJHpRkDy4LVo5gVFoAu/d/6IG3cC8WUcm2d+Tu4UuuCPe6/kI8EWY+FzE8CkeA3GuUZA+zcNLMsTCQd2/Pn7Wt+nsoyx6U83aPwxreSAKugtKTpbKhKqgvJvDIie9CAj9BAND4hwGcZpPL9CMGUliWE5hvf71Rw8pG57F/I4vPchRVg4cToirEcATz0NLg1nNxlPvvqAIpiJsJPFzUvrwqbKG8u9eVqCsEb/QXLOjHudknBlHZ6aTfDR9gJaw9nCts4ePu3sBr+5oZHMyHj1k7FzJbwPoOHi4OuS47BFJYWC2iovS/6O7hS07G0noKQv6umSxjELdvu3aDzwUR9WhZ0iS15d9OtYT+x33NG6+1/PHYwGMI0eOWXzlu+QL69wKp1rJSay1HQz3nWVFqLVHqfE+QUi2f1D2WVEuMxjrnD8Ravu1B5w21fNt9xx/YYi1RqbVEaZwxaz/r31Zb3sAtP2NjG/Z8tK9l0HUba6Ncu9HnwkALpFrLU/L7ZWOzolk2tXLr/Lhh2nRMMxfvvMU/S6KcK8L14q0+VxuCbz2CucIWyvnO3Wwjn8Rl951yPomy2nWHfraHy8MssPozvONe4Nhj1jRP/o+q3qfx4Tc0EYTrx9HO5Ysfax8WK8dYjscgBLR/EaQUfONMgbTvxrO33PWeJVEpAO6Xd/tw+u7XPhph7Q1cKKLJgiY0o8yfWtF1Utn2PjZuFa7Fm/OajX+KQPg5fgDQ0PvUD7/3djsEX3wX7tVgZ8oHAJAdcUzfY2TM7e919TkbI1+79Bb4PY7S7hHaU0eivIN5AFeFNMq7o49emxvfGlrBqZpNY0GW4QvsjV3p6c7XbpSkYmUjok3fZIxP5xE5jemBvLfUW2d+EziAP2xHqbcQfNsHWEAan5Xk9Z0gJBX+jaE/ON3ySVxef3GEqhpFVb3D8QIpLKwC9cx3XhTPkqgUEngcieFy2uer81GU8oAQPcbShgpvnsGcZpPpUytl2YOSksYVsriUPShlspi7SONv2YOP8ihBvIDmBSA87V1+JjwNAhen+Lerz/C3+u279q4g3j6O6YyMeToJa2/gukjji4GVONVsGs1VGb6A9eMyw/X0jUPGSzQq20u9/VsuanPVN/7IjlA7KcIV3u0EjEAKYjiI5smv+vGOcHmYRWt1B6LUCZ69c8TtYN9ZAy1IKsTwoEB+hOYn3JjPNs7ImKdRDI/CQdQPDa5GOUuiUghiITL4BVSIHpuw8eauz0U/a+fhiexkyRz5jVJvQ+awG2ocFXEXPrkGH4Cr3OvrDRsN9RXOoUKUa/CivVTtde8yvXwUpb9SEDcPrpc5aksL2x2OcPl+C67NHTxTEvq/p1HOAEsDplaq2TQebCau+3YvefPGa/CtdnXWl1bOobOk0tCYp4wQleG+SON8hHXxZsyVGznHbc8FEfWyfekMm53t9qWUw1voliWcU9juvGySjW26G2t20j2gbTISut7tEc0SBnK6FwRJhbih7ba9YkCnGcNATkTkcMxHTkTkcAzkREQOx0BORORwDORERA5nT6k3p5BU+BXV5AyJU8ZI2T3Hl+Yjmm2WZT8E2tvz97tS2e5P8Tb1e0pPLAVoO1cfj9uHiGzDUm9ERA439aXeJqmnRNtFFp9PBvSRUhDXE5gfUqZseBk3Pa3up/68Idr33Sdmb1b5Xpk78wnRYzwLB7nxhmhCzL8jP0viz770tb2pbKc1iB9jKRxEXfGgJHvw8f0pFsKR3k6SimcbCTQOtWrsH5XfIIQPIPZV43Gv/4xv77XjnOcAd3c2RD1j443qRNIvWFgsov7B5MAnvcUD7GvphWUPSsoW6k92sMR5bqKZMcWl3ibp9hJt3X1ulJXT+7jXU6OVccvvo44IHnS9AHhfRoC+yvWmmFiZu46G+gol2cO7caIJmeJSb5M0pERbX5/mSeFmn5HLuO3hW2EHj68r0sfwwEh1nrFMqswdEdnlHpR6M9d8uPua2kYPilo+7zfwBJLA2uj5wI2Z0TJ3RNTD9EBelj36B57PUZGjqEoq/OunOH9nsPqMLfQqQk9DADp301o5uGJPn6+HHpTNCLhnv6J+kYB7LQa8sKqCkF7mLjOozF3x1p8iImexvdTbdNA+gBxUoq2/j3tD7SlLJ0gpiNFxPjjUjjcf3rHmQ04Ao5W5G1Z2b7Q+7Q1Edyv1RkRGWRLIb5R6c8L68XwU57ki3LK+e3HzOSq57M0+mVM82OzschRfAt8+jHl9+X18Baz5kBNAu8xd/UkCz67He4pyZvBUUEONo1IIwqf/DgYFYiN9iGiymI/cTvqa+0bGpOmaKeGN1/D4SXrKp9OIZgeTZtnIG0nAdZHGlxkK4mivwDlkECeaFN6R20FSsbIRwRycv4qHiOzHQE5E5HCcWiEicjgGciIih2MgJyJyOAZyIiKHs6/Um777z68cQ+SmEiKisVkayIemss1HtXzdmWJfvm4iIhqF7aXeGn+domndIIiIZh5LvRERORxLvREROZz9pd7O/kADQbjX+IEnEdE4LAvkxku97aGcSQMvDpgWlYhoDKbnWukt9dZ/skFJomIQlR0Iudcs1ktENAb7S70FfoIAqyrkEBHNPpZ6IyJyOJZ6IyJyOPPXkQOo7nqulxhevvNYcQoiItLZnjRLWHsOF4poskoOEdFYLLkjN6Sr3Fk9F+cmISKiMbHUGxGRw9k+tUJERHfDQE5E5HAM5EREDsdATkTkcAzkREQOx0BORORwDORERA7HQE5E5HAM5EREDsdATkTkcAzkREQOx0BORORwDORERA7HQE5E5HD/AUk8gH1iRWgMAAAAAElFTkSuQmCC",b="/assets/JavaGuide_Nginx_初步认识_Nginx的内置status.29a965c4.png",v=JSON.parse('{"title":"Nginx 的初步认识 | JavaGuide","description":"","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://JavaGuide.net/百万架构师/Nginx/Nginx 的初步认识.html"}],["meta",{"name":"keywords","content":"Nginx 的初步认识 , JavaGuide , JavaGuide官网, Java面试指南, Java基础, 多线程, JVM, 虚拟机, 数据库, MySQL, Spring, Redis, MyBatis, 系统设计, 分布式, RPC, 高可用, 高并发"}],["meta",{"name":"og:url","content":"https://JavaGuide.net"}],["meta",{"name":"og:type","content":"website"}],["meta",{"name":"og:image","content":"https://JavaGuide.net/og.png"}],["meta",{"name":"og:title","content":"Nginx 的初步认识 | JavaGuide | Java面试指南 | JavaGuide官网"}],["meta",{"name":"og:description","content":"Nginx 的初步认识 | JavaGuide | Java面试指南 | JavaGuide官网 | 「JavaGuide.net」一份涵盖大部分 Java 程序员所需要掌握的核心知识。准备 Java 面试，首选 JavaGuide.net ！"}],["meta",{"name":"twitter:site","content":"https://JavaGuide.net"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:creator","content":"nogeek.cn"}],["meta",{"name":"twitter:title","content":"Nginx 的初步认识 | JavaGuide | Java面试指南 | JavaGuide官网"}],["meta",{"name":"twitter:description","content":"Nginx 的初步认识 | JavaGuide | Java面试指南 | JavaGuide官网 | 「JavaGuide.net」一份涵盖大部分 Java 程序员所需要掌握的核心知识。准备 Java 面试，首选 JavaGuide.net ！"}],["meta",{"name":"twitter:image","content":"https://JavaGuide.net/og.png"}],["meta",{"name":"sogou_site_verification","content":"fcAkazTXFd"}],["meta",{"name":"baidu-site-verification","content":"codeva-MXEPYsXKGk"}],["meta",{"name":"msvalidate.01","content":"9F2D57CFC59E8031212A166878638B15"}]]},"headers":[],"relativePath":"百万架构师/Nginx/Nginx 的初步认识.md","filePath":"百万架构师/Nginx/Nginx 的初步认识.md","lastUpdated":1741277271000}'),F={name:"百万架构师/Nginx/Nginx 的初步认识.md"},d=l('<p>Nginx 的初步认识及配置</p><h3 id="课程目标" tabindex="-1">课程目标 <a class="header-anchor" href="#课程目标" aria-label="Permalink to &quot;课程目标&quot;">​</a></h3><ol><li>Nginx 在分布式架构中的应用分析</li><li>常用的 Web 服务器及差异</li><li>Nginx 的安装以及配置分析</li><li>Nginx 虚拟主机配置</li><li>详解 Location 的匹配规则</li></ol><h2 id="背景" tabindex="-1">背景 <a class="header-anchor" href="#背景" aria-label="Permalink to &quot;背景&quot;">​</a></h2><p>早期用 F5 做负载均衡</p><p><img src="'+p+'" alt="JavaGuide_Nginx_初步认识_背景_F5.png"></p><p>后来通过负载均衡和热备来提高整个的 QPS。</p><p><img src="'+o+'" alt="JavaGuide_Nginx_初步认识_Nginx负载均衡.png"></p><h2 id="什么是-nginx" tabindex="-1">什么是 Nginx <a class="header-anchor" href="#什么是-nginx" aria-label="Permalink to &quot;什么是 Nginx&quot;">​</a></h2><p>Nginx 是一个高性能的反向代理服务器</p><ul><li>正向代理代理的是客户端</li><li>反向代理代理的是服务端</li></ul><h3 id="apache、tomcat、nginx" tabindex="-1">Apache、Tomcat、Nginx <a class="header-anchor" href="#apache、tomcat、nginx" aria-label="Permalink to &quot;Apache、Tomcat、Nginx&quot;">​</a></h3><p>​ 都是 HTTP 服务器，他们都会放到我们服务端的服务器上，通过绑定 IP 和 端口的方式，去监听一个端口号。接收客户端的 HTTP 请求。</p><p><img src="'+e+`" alt="JavaGuide_Nginx_初步认识_http_server代理.png"></p><p>展示给用户端。</p><p>JSP 是动态资源。</p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>apache、nginx</td><td>静态文件服务器</td><td>css / js</td></tr><tr><td>Tomcat</td><td>动态文件服务器</td><td>jsp / servlet</td></tr></tbody></table><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>apache</td><td>有一些性能瓶颈的</td></tr><tr><td>Nginx</td><td>主要是用来处理高并发的请求</td></tr></tbody></table><p>Nginx 和 Apache 也是可以做动态解析的，但是它本身不是做这个的。</p><h4 id="nginx-功能" tabindex="-1">Nginx 功能 <a class="header-anchor" href="#nginx-功能" aria-label="Permalink to &quot;Nginx 功能&quot;">​</a></h4><ul><li>反向代理。</li><li>流量分发</li><li>动静分离</li><li>认证</li><li>授权</li></ul><p>它还是一个高度模块化的设计</p><h3 id="安装-nginx" tabindex="-1">安装 Nginx <a class="header-anchor" href="#安装-nginx" aria-label="Permalink to &quot;安装 Nginx&quot;">​</a></h3><p><a href="http://nginx.org/download/" target="_blank" rel="noreferrer">http://nginx.org/download/</a></p><blockquote><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@Darian1 software]# mkdir nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 software]# cd nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#F97583;">/</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# .</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">configure </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">prefix</span><span style="color:#F97583;">=/</span><span style="color:#E1E4E8;">software</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">.</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">configure: error: the HTTP rewrite module requires the PCRE library.</span></span>
<span class="line"><span style="color:#E1E4E8;">You can either disable the module by using </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">without</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">http_rewrite_module</span></span>
<span class="line"><span style="color:#E1E4E8;">option, or install the PCRE library into the system, or build the PCRE library</span></span>
<span class="line"><span style="color:#E1E4E8;">statically from the source with nginx by using </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">with</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">pcre</span><span style="color:#F97583;">=&lt;</span><span style="color:#E1E4E8;">path</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> option.</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# yum install pcre</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">devel</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# .</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">configure </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">prefix</span><span style="color:#F97583;">=/</span><span style="color:#E1E4E8;">software</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">.</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">configure: error: the HTTP gzip module requires the zlib library.</span></span>
<span class="line"><span style="color:#E1E4E8;">You can either disable the module by using </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">without</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">http_gzip_module</span></span>
<span class="line"><span style="color:#E1E4E8;">option, or install the zlib library into the system, or build the zlib library</span></span>
<span class="line"><span style="color:#E1E4E8;">statically from the source with nginx by using </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">with</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">zlib</span><span style="color:#F97583;">=&lt;</span><span style="color:#E1E4E8;">path</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> option.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian3 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.4.1</span><span style="color:#E1E4E8;">]# yum install </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">y zlib</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">devel</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# .</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">configure </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">prefix</span><span style="color:#F97583;">=/</span><span style="color:#E1E4E8;">software</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# make </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> make install</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 software]# cd nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx]# ll</span></span>
<span class="line"><span style="color:#E1E4E8;">总用量 </span><span style="color:#79B8FF;">4</span></span>
<span class="line"><span style="color:#E1E4E8;">drwxr</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">xr</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">x. </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> root root </span><span style="color:#79B8FF;">4096</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> conf</span></span>
<span class="line"><span style="color:#E1E4E8;">drwxr</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">xr</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">x. </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> root root   </span><span style="color:#79B8FF;">68</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> html</span></span>
<span class="line"><span style="color:#E1E4E8;">drwxr</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">xr</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">x. </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> root root    </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> logs</span></span>
<span class="line"><span style="color:#E1E4E8;">drwxr</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">xr</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">x. </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> root root   </span><span style="color:#79B8FF;">36</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;"> sbin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx]# cd sbin</span><span style="color:#F97583;">/</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 sbin]# ll</span></span>
<span class="line"><span style="color:#E1E4E8;">总用量 </span><span style="color:#79B8FF;">1704</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rwxr</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">xr</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">x. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root </span><span style="color:#79B8FF;">868424</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;"> nginx</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rwxr</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">xr</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">x. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root </span><span style="color:#79B8FF;">868424</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> nginx.old</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 sbin]# .</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 sbin]# .</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">s stop</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@Darian1 software]# mkdir nginx</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 software]# cd nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#D73A49;">/</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# .</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">configure </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">prefix</span><span style="color:#D73A49;">=/</span><span style="color:#24292E;">software</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">.</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">configure: error: the HTTP rewrite module requires the PCRE library.</span></span>
<span class="line"><span style="color:#24292E;">You can either disable the module by using </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">without</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">http_rewrite_module</span></span>
<span class="line"><span style="color:#24292E;">option, or install the PCRE library into the system, or build the PCRE library</span></span>
<span class="line"><span style="color:#24292E;">statically from the source with nginx by using </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">with</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">pcre</span><span style="color:#D73A49;">=&lt;</span><span style="color:#24292E;">path</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> option.</span></span>
<span class="line"><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# yum install pcre</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">devel</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# .</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">configure </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">prefix</span><span style="color:#D73A49;">=/</span><span style="color:#24292E;">software</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">.</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">configure: error: the HTTP gzip module requires the zlib library.</span></span>
<span class="line"><span style="color:#24292E;">You can either disable the module by using </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">without</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">http_gzip_module</span></span>
<span class="line"><span style="color:#24292E;">option, or install the zlib library into the system, or build the zlib library</span></span>
<span class="line"><span style="color:#24292E;">statically from the source with nginx by using </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">with</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">zlib</span><span style="color:#D73A49;">=&lt;</span><span style="color:#24292E;">path</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> option.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">   </span></span>
<span class="line"><span style="color:#24292E;">[root@Darian3 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.4.1</span><span style="color:#24292E;">]# yum install </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">y zlib</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">devel</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# .</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">configure </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">prefix</span><span style="color:#D73A49;">=/</span><span style="color:#24292E;">software</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# make </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> make install</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 software]# cd nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx]# ll</span></span>
<span class="line"><span style="color:#24292E;">总用量 </span><span style="color:#005CC5;">4</span></span>
<span class="line"><span style="color:#24292E;">drwxr</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">xr</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">x. </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> root root </span><span style="color:#005CC5;">4096</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> conf</span></span>
<span class="line"><span style="color:#24292E;">drwxr</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">xr</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">x. </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> root root   </span><span style="color:#005CC5;">68</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> html</span></span>
<span class="line"><span style="color:#24292E;">drwxr</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">xr</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">x. </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> root root    </span><span style="color:#005CC5;">6</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> logs</span></span>
<span class="line"><span style="color:#24292E;">drwxr</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">xr</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">x. </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> root root   </span><span style="color:#005CC5;">36</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">59</span><span style="color:#24292E;"> sbin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx]# cd sbin</span><span style="color:#D73A49;">/</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 sbin]# ll</span></span>
<span class="line"><span style="color:#24292E;">总用量 </span><span style="color:#005CC5;">1704</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rwxr</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">xr</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">x. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root </span><span style="color:#005CC5;">868424</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">59</span><span style="color:#24292E;"> nginx</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rwxr</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">xr</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">x. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root </span><span style="color:#005CC5;">868424</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> nginx.old</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 sbin]# .</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 sbin]# .</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">s stop</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div></blockquote><ol><li>下载 tar 包</li><li><code>tar -zxvf nginx.tar.gz</code></li><li><code>./configure [--prefix]</code></li><li><code>make &amp;&amp; make install</code></li></ol><h3 id="启动和停止" tabindex="-1">启动和停止 <a class="header-anchor" href="#启动和停止" aria-label="Permalink to &quot;启动和停止&quot;">​</a></h3><ol><li><code>./nginx</code></li><li><code>./nginx -s stop</code></li></ol><p><img src="`+r+`" alt="JavaGuide_Nginx_初步认识_Nginx欢迎界面.png"></p><h2 id="nginx-conf" tabindex="-1">nginx.conf <a class="header-anchor" href="#nginx-conf" aria-label="Permalink to &quot;nginx.conf&quot;">​</a></h2><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx]# cd conf</span><span style="color:#F97583;">/</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 conf]# ll</span></span>
<span class="line"><span style="color:#E1E4E8;">总用量 </span><span style="color:#79B8FF;">60</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root  </span><span style="color:#79B8FF;">979</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> fastcgi.conf</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root  </span><span style="color:#79B8FF;">979</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;"> fastcgi.conf.default</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root  </span><span style="color:#79B8FF;">909</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> fastcgi_params</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root  </span><span style="color:#79B8FF;">909</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;"> fastcgi_params.default</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root </span><span style="color:#79B8FF;">2837</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;"> koi</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">utf</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root </span><span style="color:#79B8FF;">2223</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;"> koi</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">win</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root </span><span style="color:#79B8FF;">3268</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> mime.types</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root </span><span style="color:#79B8FF;">3268</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;"> mime.types.default</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root </span><span style="color:#79B8FF;">2685</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> nginx.conf</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root </span><span style="color:#79B8FF;">2685</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;"> nginx.conf.default</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root  </span><span style="color:#79B8FF;">544</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> scgi_params</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root  </span><span style="color:#79B8FF;">544</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;"> scgi_params.default</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root  </span><span style="color:#79B8FF;">570</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> uwsgi_params</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root  </span><span style="color:#79B8FF;">570</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;"> uwsgi_params.default</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root </span><span style="color:#79B8FF;">3610</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;"> win</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">utf</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 conf]# vim nginx.conf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@Darian1 nginx]# cd conf</span><span style="color:#D73A49;">/</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 conf]# ll</span></span>
<span class="line"><span style="color:#24292E;">总用量 </span><span style="color:#005CC5;">60</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root  </span><span style="color:#005CC5;">979</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> fastcgi.conf</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root  </span><span style="color:#005CC5;">979</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">59</span><span style="color:#24292E;"> fastcgi.conf.default</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root  </span><span style="color:#005CC5;">909</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> fastcgi_params</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root  </span><span style="color:#005CC5;">909</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">59</span><span style="color:#24292E;"> fastcgi_params.default</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root </span><span style="color:#005CC5;">2837</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">59</span><span style="color:#24292E;"> koi</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">utf</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root </span><span style="color:#005CC5;">2223</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">59</span><span style="color:#24292E;"> koi</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">win</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root </span><span style="color:#005CC5;">3268</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> mime.types</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root </span><span style="color:#005CC5;">3268</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">59</span><span style="color:#24292E;"> mime.types.default</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root </span><span style="color:#005CC5;">2685</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> nginx.conf</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root </span><span style="color:#005CC5;">2685</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">59</span><span style="color:#24292E;"> nginx.conf.default</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root  </span><span style="color:#005CC5;">544</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> scgi_params</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root  </span><span style="color:#005CC5;">544</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">59</span><span style="color:#24292E;"> scgi_params.default</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root  </span><span style="color:#005CC5;">570</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> uwsgi_params</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root  </span><span style="color:#005CC5;">570</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">59</span><span style="color:#24292E;"> uwsgi_params.default</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root </span><span style="color:#005CC5;">3610</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">59</span><span style="color:#24292E;"> win</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">utf</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 conf]# vim nginx.conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">#user  nobody;</span></span>
<span class="line"><span style="color:#E1E4E8;">worker_processes  </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#error_log  logs</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">error.log;</span></span>
<span class="line"><span style="color:#E1E4E8;">#error_log  logs</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">error.log  notice;</span></span>
<span class="line"><span style="color:#E1E4E8;">#error_log  logs</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">error.log  info;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#pid        logs</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx.pid;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">events {</span></span>
<span class="line"><span style="color:#E1E4E8;">    # 允许连接的最大数量</span></span>
<span class="line"><span style="color:#E1E4E8;">    worker_connections  </span><span style="color:#79B8FF;">1024</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">http {</span></span>
<span class="line"><span style="color:#E1E4E8;">    include       mime.types;</span></span>
<span class="line"><span style="color:#E1E4E8;">    default_type  application</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">octet</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">stream;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    #log_format  main  </span><span style="color:#9ECBFF;">&#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #                  </span><span style="color:#9ECBFF;">&#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #                  </span><span style="color:#9ECBFF;">&#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    #access_log  logs</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">access.log  main;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    sendfile        on;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #tcp_nopush     on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    #keepalive_timeout  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    keepalive_timeout  </span><span style="color:#79B8FF;">65</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    #gzip  on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    server {</span></span>
<span class="line"><span style="color:#E1E4E8;">        listen       </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        server_name  localhost;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        #charset koi8</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        #access_log  logs</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">host.access.log  main;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            root   html;</span></span>
<span class="line"><span style="color:#E1E4E8;">            index  index.html index.htm;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        #error_page  </span><span style="color:#79B8FF;">404</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">/</span><span style="color:#FDAEB7;font-style:italic;">404.html</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        # redirect server error pages to the </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> page </span><span style="color:#F97583;">/</span><span style="color:#FDAEB7;font-style:italic;">50x.html</span></span>
<span class="line"><span style="color:#E1E4E8;">        #</span></span>
<span class="line"><span style="color:#E1E4E8;">        error_page   </span><span style="color:#79B8FF;">500</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">502</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">503</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">504</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">/</span><span style="color:#FDAEB7;font-style:italic;">50x.html</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#FDAEB7;font-style:italic;">50x.html</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            root   html;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        # proxy the PHP scripts to Apache listening on </span><span style="color:#FDAEB7;font-style:italic;">127.0.0.1</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">80</span></span>
<span class="line"><span style="color:#E1E4E8;">        #</span></span>
<span class="line"><span style="color:#E1E4E8;">        #location </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;"> \\.php$ {</span></span>
<span class="line"><span style="color:#E1E4E8;">        #    proxy_pass   http:</span><span style="color:#6A737D;">//127.0.0.1;</span></span>
<span class="line"><span style="color:#E1E4E8;">        #}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        # pass the PHP scripts to FastCGI server listening on </span><span style="color:#FDAEB7;font-style:italic;">127.0.0.1</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">9000</span></span>
<span class="line"><span style="color:#E1E4E8;">        #</span></span>
<span class="line"><span style="color:#E1E4E8;">        #location </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;"> \\.php$ {</span></span>
<span class="line"><span style="color:#E1E4E8;">        #    root           html;</span></span>
<span class="line"><span style="color:#E1E4E8;">        #    fastcgi_pass   </span><span style="color:#FDAEB7;font-style:italic;">127.0.0.1</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">9000</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        #    fastcgi_index  index.php;</span></span>
<span class="line"><span style="color:#E1E4E8;">        #    fastcgi_param  SCRIPT_FILENAME  </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">scripts$fastcgi_script_name;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">#    include</span><span style="color:#E1E4E8;">        fastcgi_params;</span></span>
<span class="line"><span style="color:#E1E4E8;">        #}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        # deny access to .htaccess files, </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> Apache</span><span style="color:#9ECBFF;">&#39;s document root</span></span>
<span class="line"><span style="color:#9ECBFF;">        # concurs with nginx&#39;</span><span style="color:#E1E4E8;">s one</span></span>
<span class="line"><span style="color:#E1E4E8;">        #</span></span>
<span class="line"><span style="color:#E1E4E8;">        #location </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">\\.ht {</span></span>
<span class="line"><span style="color:#E1E4E8;">        #    deny  all;</span></span>
<span class="line"><span style="color:#E1E4E8;">        #}</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    # another virtual host using mix of IP</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">, name</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">, and port</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">based configuration</span></span>
<span class="line"><span style="color:#E1E4E8;">    #</span></span>
<span class="line"><span style="color:#E1E4E8;">    #server {</span></span>
<span class="line"><span style="color:#E1E4E8;">    #    listen       </span><span style="color:#79B8FF;">8000</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #    listen       somename:</span><span style="color:#79B8FF;">8080</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #    server_name  somename  alias  another.alias;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    #    location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    #        root   html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #        index  index.html index.htm;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    #}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    # HTTPS server</span></span>
<span class="line"><span style="color:#E1E4E8;">    #</span></span>
<span class="line"><span style="color:#E1E4E8;">    #server {</span></span>
<span class="line"><span style="color:#E1E4E8;">    #    listen       </span><span style="color:#79B8FF;">443</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #    server_name  localhost;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    #    ssl                  on;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #    ssl_certificate      cert.pem;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #    ssl_certificate_key  cert.key;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    #    ssl_session_timeout  </span><span style="color:#FDAEB7;font-style:italic;">5m</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    #    ssl_protocols  SSLv2 SSLv3 TLSv1;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #    ssl_ciphers  HIGH:</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">aNULL:</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">MD5;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #    ssl_prefer_server_ciphers   on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    #    location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    #        root   html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #        index  index.html index.htm;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    #}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">#user  nobody;</span></span>
<span class="line"><span style="color:#24292E;">worker_processes  </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#error_log  logs</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">error.log;</span></span>
<span class="line"><span style="color:#24292E;">#error_log  logs</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">error.log  notice;</span></span>
<span class="line"><span style="color:#24292E;">#error_log  logs</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">error.log  info;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#pid        logs</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx.pid;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">events {</span></span>
<span class="line"><span style="color:#24292E;">    # 允许连接的最大数量</span></span>
<span class="line"><span style="color:#24292E;">    worker_connections  </span><span style="color:#005CC5;">1024</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">http {</span></span>
<span class="line"><span style="color:#24292E;">    include       mime.types;</span></span>
<span class="line"><span style="color:#24292E;">    default_type  application</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">octet</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">stream;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    #log_format  main  </span><span style="color:#032F62;">&#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span></span>
<span class="line"><span style="color:#24292E;">    #                  </span><span style="color:#032F62;">&#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span></span>
<span class="line"><span style="color:#24292E;">    #                  </span><span style="color:#032F62;">&#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    #access_log  logs</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">access.log  main;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    sendfile        on;</span></span>
<span class="line"><span style="color:#24292E;">    #tcp_nopush     on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    #keepalive_timeout  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    keepalive_timeout  </span><span style="color:#005CC5;">65</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    #gzip  on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    server {</span></span>
<span class="line"><span style="color:#24292E;">        listen       </span><span style="color:#005CC5;">80</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        server_name  localhost;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        #charset koi8</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        #access_log  logs</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">host.access.log  main;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            root   html;</span></span>
<span class="line"><span style="color:#24292E;">            index  index.html index.htm;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        #error_page  </span><span style="color:#005CC5;">404</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">/</span><span style="color:#B31D28;font-style:italic;">404.html</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        # redirect server error pages to the </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> page </span><span style="color:#D73A49;">/</span><span style="color:#B31D28;font-style:italic;">50x.html</span></span>
<span class="line"><span style="color:#24292E;">        #</span></span>
<span class="line"><span style="color:#24292E;">        error_page   </span><span style="color:#005CC5;">500</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">502</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">503</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">504</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">/</span><span style="color:#B31D28;font-style:italic;">50x.html</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#B31D28;font-style:italic;">50x.html</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            root   html;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        # proxy the PHP scripts to Apache listening on </span><span style="color:#B31D28;font-style:italic;">127.0.0.1</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">80</span></span>
<span class="line"><span style="color:#24292E;">        #</span></span>
<span class="line"><span style="color:#24292E;">        #location </span><span style="color:#D73A49;">~</span><span style="color:#24292E;"> \\.php$ {</span></span>
<span class="line"><span style="color:#24292E;">        #    proxy_pass   http:</span><span style="color:#6A737D;">//127.0.0.1;</span></span>
<span class="line"><span style="color:#24292E;">        #}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        # pass the PHP scripts to FastCGI server listening on </span><span style="color:#B31D28;font-style:italic;">127.0.0.1</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">9000</span></span>
<span class="line"><span style="color:#24292E;">        #</span></span>
<span class="line"><span style="color:#24292E;">        #location </span><span style="color:#D73A49;">~</span><span style="color:#24292E;"> \\.php$ {</span></span>
<span class="line"><span style="color:#24292E;">        #    root           html;</span></span>
<span class="line"><span style="color:#24292E;">        #    fastcgi_pass   </span><span style="color:#B31D28;font-style:italic;">127.0.0.1</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">9000</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        #    fastcgi_index  index.php;</span></span>
<span class="line"><span style="color:#24292E;">        #    fastcgi_param  SCRIPT_FILENAME  </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">scripts$fastcgi_script_name;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">#    include</span><span style="color:#24292E;">        fastcgi_params;</span></span>
<span class="line"><span style="color:#24292E;">        #}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        # deny access to .htaccess files, </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> Apache</span><span style="color:#032F62;">&#39;s document root</span></span>
<span class="line"><span style="color:#032F62;">        # concurs with nginx&#39;</span><span style="color:#24292E;">s one</span></span>
<span class="line"><span style="color:#24292E;">        #</span></span>
<span class="line"><span style="color:#24292E;">        #location </span><span style="color:#D73A49;">~</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">\\.ht {</span></span>
<span class="line"><span style="color:#24292E;">        #    deny  all;</span></span>
<span class="line"><span style="color:#24292E;">        #}</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    # another virtual host using mix of IP</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">, name</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">, and port</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">based configuration</span></span>
<span class="line"><span style="color:#24292E;">    #</span></span>
<span class="line"><span style="color:#24292E;">    #server {</span></span>
<span class="line"><span style="color:#24292E;">    #    listen       </span><span style="color:#005CC5;">8000</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    #    listen       somename:</span><span style="color:#005CC5;">8080</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    #    server_name  somename  alias  another.alias;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    #    location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    #        root   html;</span></span>
<span class="line"><span style="color:#24292E;">    #        index  index.html index.htm;</span></span>
<span class="line"><span style="color:#24292E;">    #    }</span></span>
<span class="line"><span style="color:#24292E;">    #}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    # HTTPS server</span></span>
<span class="line"><span style="color:#24292E;">    #</span></span>
<span class="line"><span style="color:#24292E;">    #server {</span></span>
<span class="line"><span style="color:#24292E;">    #    listen       </span><span style="color:#005CC5;">443</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    #    server_name  localhost;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    #    ssl                  on;</span></span>
<span class="line"><span style="color:#24292E;">    #    ssl_certificate      cert.pem;</span></span>
<span class="line"><span style="color:#24292E;">    #    ssl_certificate_key  cert.key;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    #    ssl_session_timeout  </span><span style="color:#B31D28;font-style:italic;">5m</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    #    ssl_protocols  SSLv2 SSLv3 TLSv1;</span></span>
<span class="line"><span style="color:#24292E;">    #    ssl_ciphers  HIGH:</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">aNULL:</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">MD5;</span></span>
<span class="line"><span style="color:#24292E;">    #    ssl_prefer_server_ciphers   on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    #    location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    #        root   html;</span></span>
<span class="line"><span style="color:#24292E;">    #        index  index.html index.htm;</span></span>
<span class="line"><span style="color:#24292E;">    #    }</span></span>
<span class="line"><span style="color:#24292E;">    #}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br></div></div><h4 id="main" tabindex="-1">Main <a class="header-anchor" href="#main" aria-label="Permalink to &quot;Main&quot;">​</a></h4><h4 id="event" tabindex="-1">event <a class="header-anchor" href="#event" aria-label="Permalink to &quot;event&quot;">​</a></h4><h4 id="http" tabindex="-1">http <a class="header-anchor" href="#http" aria-label="Permalink to &quot;http&quot;">​</a></h4><h3 id="虚拟主机配置" tabindex="-1">虚拟主机配置 <a class="header-anchor" href="#虚拟主机配置" aria-label="Permalink to &quot;虚拟主机配置&quot;">​</a></h3><p>针对不同的端口号做不同的访问，不同域名做不同的访问。</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">server {</span></span>
<span class="line"><span style="color:#E1E4E8;">    listen </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">;  </span></span>
<span class="line"><span style="color:#E1E4E8;">    server_name localhost;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #charset koi8</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #access_log logs</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">host.access.log main;</span></span>
<span class="line"><span style="color:#E1E4E8;">    location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        root html;</span></span>
<span class="line"><span style="color:#E1E4E8;">        index index.html index.htm;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">server {</span></span>
<span class="line"><span style="color:#24292E;">    listen </span><span style="color:#005CC5;">80</span><span style="color:#24292E;">;  </span></span>
<span class="line"><span style="color:#24292E;">    server_name localhost;</span></span>
<span class="line"><span style="color:#24292E;">    #charset koi8</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r;</span></span>
<span class="line"><span style="color:#24292E;">    #access_log logs</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">host.access.log main;</span></span>
<span class="line"><span style="color:#24292E;">    location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        root html;</span></span>
<span class="line"><span style="color:#24292E;">        index index.html index.htm;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="基于ip的虚拟主机" tabindex="-1">基于ip的虚拟主机 <a class="header-anchor" href="#基于ip的虚拟主机" aria-label="Permalink to &quot;基于ip的虚拟主机&quot;">​</a></h4><p>不演示</p><h4 id="基于端口号的虚拟主机" tabindex="-1">基于端口号的虚拟主机 <a class="header-anchor" href="#基于端口号的虚拟主机" aria-label="Permalink to &quot;基于端口号的虚拟主机&quot;">​</a></h4><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">server {</span></span>
<span class="line"><span style="color:#E1E4E8;">    listen </span><span style="color:#79B8FF;">8080</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    server_name localhost;</span></span>
<span class="line"><span style="color:#E1E4E8;">    location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        root html;</span></span>
<span class="line"><span style="color:#E1E4E8;">        index index.html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">server {</span></span>
<span class="line"><span style="color:#24292E;">    listen </span><span style="color:#005CC5;">8080</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    server_name localhost;</span></span>
<span class="line"><span style="color:#24292E;">    location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        root html;</span></span>
<span class="line"><span style="color:#24292E;">        index index.html;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>我们可以配置一个端口段，去做不同的路由转发。</p><h4 id="基于域名的虚拟主机" tabindex="-1">基于域名的虚拟主机 <a class="header-anchor" href="#基于域名的虚拟主机" aria-label="Permalink to &quot;基于域名的虚拟主机&quot;">​</a></h4><p>购买主域名以后，可以基于主域名开放很多二级域名。</p><p>www.darian.com / ask.darian.com / git.darian.com / bbs.darian.com</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">server{</span></span>
<span class="line"><span style="color:#E1E4E8;">    listen </span><span style="color:#79B8FF;">8080</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    server_name localhost;</span></span>
<span class="line"><span style="color:#E1E4E8;">    location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        root html;</span></span>
<span class="line"><span style="color:#E1E4E8;">        index index.html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">server{</span></span>
<span class="line"><span style="color:#E1E4E8;">    listen </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    server_name bbs.darian.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        root html;</span></span>
<span class="line"><span style="color:#E1E4E8;">        index bbs.html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">server{</span></span>
<span class="line"><span style="color:#E1E4E8;">    listen </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    server_name ask.darian.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        root html;</span></span>
<span class="line"><span style="color:#E1E4E8;">        index ask.html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">server{</span></span>
<span class="line"><span style="color:#E1E4E8;">    listen </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    server_name www.darian.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        # 去这个目录下边找</span></span>
<span class="line"><span style="color:#E1E4E8;">        root html;</span></span>
<span class="line"><span style="color:#E1E4E8;">        index index.html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">server{</span></span>
<span class="line"><span style="color:#24292E;">    listen </span><span style="color:#005CC5;">8080</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    server_name localhost;</span></span>
<span class="line"><span style="color:#24292E;">    location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        root html;</span></span>
<span class="line"><span style="color:#24292E;">        index index.html;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">server{</span></span>
<span class="line"><span style="color:#24292E;">    listen </span><span style="color:#005CC5;">80</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    server_name bbs.darian.com;</span></span>
<span class="line"><span style="color:#24292E;">    location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        root html;</span></span>
<span class="line"><span style="color:#24292E;">        index bbs.html;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">server{</span></span>
<span class="line"><span style="color:#24292E;">    listen </span><span style="color:#005CC5;">80</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    server_name ask.darian.com;</span></span>
<span class="line"><span style="color:#24292E;">    location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        root html;</span></span>
<span class="line"><span style="color:#24292E;">        index ask.html;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">server{</span></span>
<span class="line"><span style="color:#24292E;">    listen </span><span style="color:#005CC5;">80</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    server_name www.darian.com;</span></span>
<span class="line"><span style="color:#24292E;">    location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        # 去这个目录下边找</span></span>
<span class="line"><span style="color:#24292E;">        root html;</span></span>
<span class="line"><span style="color:#24292E;">        index index.html;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx]# .</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">sbin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx]# .</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">sbin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">s reload</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx]# ps </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ef</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">grep nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">root       </span><span style="color:#79B8FF;">9595</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">15</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#F97583;">:0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> nginx: master process .</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">sbin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">nobody     </span><span style="color:#79B8FF;">9596</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">9595</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">15</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#F97583;">:0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> nginx: worker process</span></span>
<span class="line"><span style="color:#E1E4E8;">root       </span><span style="color:#79B8FF;">9619</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">9550</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">15</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">28</span><span style="color:#E1E4E8;"> pts</span><span style="color:#F97583;">/</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> grep </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">color</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">auto nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@Darian1 nginx]# .</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">sbin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx]# .</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">sbin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">s reload</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx]# ps </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ef</span><span style="color:#D73A49;">|</span><span style="color:#24292E;">grep nginx</span></span>
<span class="line"><span style="color:#24292E;">root       </span><span style="color:#005CC5;">9595</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">15</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">16</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;">        </span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#D73A49;">:0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> nginx: master process .</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">sbin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span></span>
<span class="line"><span style="color:#24292E;">nobody     </span><span style="color:#005CC5;">9596</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">9595</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">15</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">16</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;">        </span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#D73A49;">:0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> nginx: worker process</span></span>
<span class="line"><span style="color:#24292E;">root       </span><span style="color:#005CC5;">9619</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">9550</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">15</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">28</span><span style="color:#24292E;"> pts</span><span style="color:#D73A49;">/</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> grep </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">color</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">auto nginx</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>需要去 html 目录下创建几个文件</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@Darian1 html]# ll</span></span>
<span class="line"><span style="color:#E1E4E8;">总用量 </span><span style="color:#79B8FF;">24</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root  </span><span style="color:#79B8FF;">383</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">50x.html</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root   </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;"> ask.html</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root   </span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">14</span><span style="color:#E1E4E8;"> bbs.html</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root  </span><span style="color:#79B8FF;">151</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> index.html</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">rw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">. </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> root root </span><span style="color:#79B8FF;">7133</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">月  </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;"> ngx_core_module.html</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@Darian1 html]# ll</span></span>
<span class="line"><span style="color:#24292E;">总用量 </span><span style="color:#005CC5;">24</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root  </span><span style="color:#005CC5;">383</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">50x.html</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root   </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">13</span><span style="color:#24292E;"> ask.html</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root   </span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">14</span><span style="color:#24292E;"> bbs.html</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root  </span><span style="color:#005CC5;">151</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> index.html</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">rw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">. </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> root root </span><span style="color:#005CC5;">7133</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">月  </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">58</span><span style="color:#24292E;"> ngx_core_module.html</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>可能需要刷新 DNS</p><p><img src="`+c+'" alt="JavaGuide_Nginx_初步认识_windows刷新DNS缓存.png"></p><p><img src="'+t+'" alt="JavaGuide_Nginx_初步认识_DNS_域名1.png"></p><p><img src="'+E+'" alt="JavaGuide_Nginx_初步认识_DNS_域名2.png"></p><p><img src="'+y+`" alt="JavaGuide_Nginx_初步认识_DNS_域名3.png"></p><blockquote><p>用本地 host 实现了域名的解析。</p><p>二级域名随意创造，备案主域名就好了</p></blockquote><h3 id="建议" tabindex="-1">建议 <a class="header-anchor" href="#建议" aria-label="Permalink to &quot;建议&quot;">​</a></h3><p>将配置单独抽出来，放到一个地方去统一地进行管理。</p><h3 id="代理解决的事情" tabindex="-1">代理解决的事情 <a class="header-anchor" href="#代理解决的事情" aria-label="Permalink to &quot;代理解决的事情&quot;">​</a></h3><ul><li>负载均衡</li><li>缓存</li><li>限流</li><li>内外网的隔离，做安全性的东西</li></ul><h2 id="location" tabindex="-1">location <a class="header-anchor" href="#location" aria-label="Permalink to &quot;location&quot;">​</a></h2><p>​ nginx 里边，需要知道 <code>location</code> ，对 <code>location</code> 做一些请求的转发。</p><p>根据请求的 <strong>URI</strong> 匹配到对应的 <code>location</code> 以后，去做对应的转发。</p><h3 id="配置语法" tabindex="-1">配置语法 <a class="header-anchor" href="#配置语法" aria-label="Permalink to &quot;配置语法&quot;">​</a></h3><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">location [</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">~*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">^~</span><span style="color:#E1E4E8;"> ] </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">uri</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> {...}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">location [</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">~*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">^~</span><span style="color:#24292E;"> ] </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">uri</span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> {...}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="配置规则" tabindex="-1">配置规则 <a class="header-anchor" href="#配置规则" aria-label="Permalink to &quot;配置规则&quot;">​</a></h3><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">uri 精准匹配</span></span>
<span class="line"><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">^~</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">uri 前缀匹配</span></span>
<span class="line"><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">uri</span></span>
<span class="line"><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> 通用匹配</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">uri 精准匹配</span></span>
<span class="line"><span style="color:#24292E;">location </span><span style="color:#D73A49;">^~</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">uri 前缀匹配</span></span>
<span class="line"><span style="color:#24292E;">location </span><span style="color:#D73A49;">~</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">uri</span></span>
<span class="line"><span style="color:#24292E;">location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> 通用匹配</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="规则的优先级" tabindex="-1">规则的优先级 <a class="header-anchor" href="#规则的优先级" aria-label="Permalink to &quot;规则的优先级&quot;">​</a></h3><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span></span>
<span class="line"><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">index</span></span>
<span class="line"><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> location </span><span style="color:#F97583;">^~</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">article</span><span style="color:#F97583;">/</span></span>
<span class="line"><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;"> location </span><span style="color:#F97583;">^~</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">article</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">files</span><span style="color:#F97583;">/</span></span>
<span class="line"><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> location </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;"> \\.(gif</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">png</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">js</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">css)$</span></span>
<span class="line"><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;"> location </span><span style="color:#F97583;">/</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">http:</span><span style="color:#6A737D;">//192.168.11.154/   -&gt; 1</span></span>
<span class="line"><span style="color:#E1E4E8;">http:</span><span style="color:#6A737D;">//192.168.11.154/index -&gt;2</span></span>
<span class="line"><span style="color:#E1E4E8;">http:</span><span style="color:#6A737D;">//192.168.11.154/article/files/1.txt -&gt;4</span></span>
<span class="line"><span style="color:#E1E4E8;">http:</span><span style="color:#6A737D;">//192.168.11.154/darian.png -&gt;5</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">1</span><span style="color:#24292E;"> location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span></span>
<span class="line"><span style="color:#005CC5;">2</span><span style="color:#24292E;"> location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">index</span></span>
<span class="line"><span style="color:#005CC5;">3</span><span style="color:#24292E;"> location </span><span style="color:#D73A49;">^~</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">article</span><span style="color:#D73A49;">/</span></span>
<span class="line"><span style="color:#005CC5;">4</span><span style="color:#24292E;"> location </span><span style="color:#D73A49;">^~</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">article</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">files</span><span style="color:#D73A49;">/</span></span>
<span class="line"><span style="color:#005CC5;">5</span><span style="color:#24292E;"> location </span><span style="color:#D73A49;">~</span><span style="color:#24292E;"> \\.(gif</span><span style="color:#D73A49;">|</span><span style="color:#24292E;">png</span><span style="color:#D73A49;">|</span><span style="color:#24292E;">js</span><span style="color:#D73A49;">|</span><span style="color:#24292E;">css)$</span></span>
<span class="line"><span style="color:#005CC5;">6</span><span style="color:#24292E;"> location </span><span style="color:#D73A49;">/</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">http:</span><span style="color:#6A737D;">//192.168.11.154/   -&gt; 1</span></span>
<span class="line"><span style="color:#24292E;">http:</span><span style="color:#6A737D;">//192.168.11.154/index -&gt;2</span></span>
<span class="line"><span style="color:#24292E;">http:</span><span style="color:#6A737D;">//192.168.11.154/article/files/1.txt -&gt;4</span></span>
<span class="line"><span style="color:#24292E;">http:</span><span style="color:#6A737D;">//192.168.11.154/darian.png -&gt;5</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>（静态资源服务器，可以做压缩的）</p><p>匹配规则是不能重复的。</p></blockquote><ol><li>精准匹配是优先级最高</li><li>普通匹配（最长的匹配）</li><li>正则匹配</li></ol><h3 id="实际使用建议" tabindex="-1">实际使用建议 <a class="header-anchor" href="#实际使用建议" aria-label="Permalink to &quot;实际使用建议&quot;">​</a></h3><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;"># 根目录的配置规则，首页是静态页面</span></span>
<span class="line"><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">=/</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"># 通用匹配  http:</span><span style="color:#6A737D;">//192.168.40.128:8080/index.html</span></span>
<span class="line"><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"># 静态规则，做动静分离</span></span>
<span class="line"><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">~*</span><span style="color:#E1E4E8;"> \\.(gif</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">....)\${</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;"># 根目录的配置规则，首页是静态页面</span></span>
<span class="line"><span style="color:#24292E;">location </span><span style="color:#D73A49;">=/</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"># 通用匹配  http:</span><span style="color:#6A737D;">//192.168.40.128:8080/index.html</span></span>
<span class="line"><span style="color:#24292E;">location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"># 静态规则，做动静分离</span></span>
<span class="line"><span style="color:#24292E;">location </span><span style="color:#D73A49;">~*</span><span style="color:#24292E;"> \\.(gif</span><span style="color:#D73A49;">|</span><span style="color:#24292E;">....)\${</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="nginx模块" tabindex="-1">Nginx模块 <a class="header-anchor" href="#nginx模块" aria-label="Permalink to &quot;Nginx模块&quot;">​</a></h2><p>​ Nginx 内部都是由一些核心和非核心的第三方模块组成的。它的模块化，我们可以做一些动态的集成和扩展。</p><p>​ 除了它本身的功能以外，我们还可以利用第三方的配置去实现更复杂的功能。</p><p>​</p><p>默认的：</p><ul><li>反向代理</li><li>email</li><li>nginx core</li></ul><h3 id="模块分类" tabindex="-1">模块分类 <a class="header-anchor" href="#模块分类" aria-label="Permalink to &quot;模块分类&quot;">​</a></h3><ol><li>核心模块 ngx_http_core_module</li><li>标准模块 http模块</li><li>第三方模块</li></ol><blockquote><p>可以把 模块看成插件</p></blockquote><h3 id="ngx-http-core-module" tabindex="-1">ngx_http_core_module <a class="header-anchor" href="#ngx-http-core-module" aria-label="Permalink to &quot;ngx_http_core_module&quot;">​</a></h3><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">server{</span></span>
<span class="line"><span style="color:#E1E4E8;">    listen port</span></span>
<span class="line"><span style="color:#E1E4E8;">        server_name   ...</span></span>
<span class="line"><span style="color:#E1E4E8;">        localtion{</span></span>
<span class="line"><span style="color:#E1E4E8;">        root ...</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">server{</span></span>
<span class="line"><span style="color:#24292E;">    listen port</span></span>
<span class="line"><span style="color:#24292E;">        server_name   ...</span></span>
<span class="line"><span style="color:#24292E;">        localtion{</span></span>
<span class="line"><span style="color:#24292E;">        root ...</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>Location</strong> 实现 <strong>URI</strong> 到文件系统路径的映射</p><ol><li><p>error_page</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;"># redirect server error pages to the </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> page </span><span style="color:#F97583;">/</span><span style="color:#FDAEB7;font-style:italic;">50x.html</span></span>
<span class="line"><span style="color:#E1E4E8;">#</span></span>
<span class="line"><span style="color:#E1E4E8;">error_page   </span><span style="color:#79B8FF;">500</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">502</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">503</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">504</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">/</span><span style="color:#FDAEB7;font-style:italic;">50x.html</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#FDAEB7;font-style:italic;">50x.html</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    root   html;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;"># redirect server error pages to the </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> page </span><span style="color:#D73A49;">/</span><span style="color:#B31D28;font-style:italic;">50x.html</span></span>
<span class="line"><span style="color:#24292E;">#</span></span>
<span class="line"><span style="color:#24292E;">error_page   </span><span style="color:#005CC5;">500</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">502</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">503</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">504</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">/</span><span style="color:#B31D28;font-style:italic;">50x.html</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#B31D28;font-style:italic;">50x.html</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    root   html;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ol><h3 id="ngx-http-access-module" tabindex="-1">ngx_http_access_module <a class="header-anchor" href="#ngx-http-access-module" aria-label="Permalink to &quot;ngx_http_access_module&quot;">​</a></h3><p>实现基于 IP 的访问控制功能</p><ol><li><code>allow address | CIDR | unix: | all;</code></li><li><code>deny address | CIDR | unix: | all;</code></li></ol><p><img src="`+i+`" alt="JavaGuide_Nginx_初步认识_阻止所有的访问.png"></p><p>自上而下检查，一旦匹配，将生效，条件严格的置前</p><p>可以用 <code>-t</code> 来看语法有没有问题</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@Darian1 sbin]# .</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">t</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@Darian1 sbin]# .</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">t</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="如何添加第三方模块" tabindex="-1">如何添加第三方模块 <a class="header-anchor" href="#如何添加第三方模块" aria-label="Permalink to &quot;如何添加第三方模块&quot;">​</a></h3><p>Nginx 不支持动态去安装或者加载模块。安装别的代码的时候需要重新编译。（我们很少去编写模块）</p><ol><li>原来所安装的配置，你必须在重新安装新模块的时候，加上</li><li>不能直接 <code>make install</code></li></ol><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">configure </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">prefix</span><span style="color:#F97583;">=/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">program</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">configure </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">prefix</span><span style="color:#D73A49;">=/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">program</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="安装方法" tabindex="-1">安装方法 <a class="header-anchor" href="#安装方法" aria-label="Permalink to &quot;安装方法&quot;">​</a></h4><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">.</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">configure </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">prefix</span><span style="color:#F97583;">=/</span><span style="color:#E1E4E8;">安装目录 </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">add</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">module </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">第三方模块的目录</span></span>
<span class="line"><span style="color:#E1E4E8;">.</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">configure </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">prefix</span><span style="color:#F97583;">=/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">program</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">with</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">http_stub_status_module </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">with</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">http_random_index_module</span></span>
<span class="line"><span style="color:#E1E4E8;">cp objs</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx $nginx_home</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">sbin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">.</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">configure </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">prefix</span><span style="color:#D73A49;">=/</span><span style="color:#24292E;">安装目录 </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">add</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">module </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">第三方模块的目录</span></span>
<span class="line"><span style="color:#24292E;">.</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">configure </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">prefix</span><span style="color:#D73A49;">=/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">program</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">with</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">http_stub_status_module </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">with</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">http_random_index_module</span></span>
<span class="line"><span style="color:#24292E;">cp objs</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx $nginx_home</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">sbin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# cd ..</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#F97583;">/</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# .</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">configure </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">prefix</span><span style="color:#F97583;">=/</span><span style="color:#E1E4E8;">software</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">with</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">http_stub_status_module </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">with</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">http_random_index_module</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# ps </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ef</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">grep nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">root       </span><span style="color:#79B8FF;">9595</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">15</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#F97583;">:0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> nginx: master process .</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">sbin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">nobody     </span><span style="color:#79B8FF;">9755</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">9595</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#F97583;">:0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> nginx: worker process</span></span>
<span class="line"><span style="color:#E1E4E8;">root      </span><span style="color:#79B8FF;">13696</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">9550</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">19</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">35</span><span style="color:#E1E4E8;"> pts</span><span style="color:#F97583;">/</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> grep </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">color</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">auto nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# kill </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">9595</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# kill </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">9755</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# ps </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ef</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">grep nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">root      </span><span style="color:#79B8FF;">13699</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">9550</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">19</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">35</span><span style="color:#E1E4E8;"> pts</span><span style="color:#F97583;">/</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> grep </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">color</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">auto nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# cp objs</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx ..</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">sbin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">cp：是否覆盖</span><span style="color:#9ECBFF;">&quot;../nginx/sbin/nginx&quot;</span><span style="color:#E1E4E8;">？ y</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]#</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# cd ..</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#D73A49;">/</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# .</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">configure </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">prefix</span><span style="color:#D73A49;">=/</span><span style="color:#24292E;">software</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">with</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">http_stub_status_module </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">with</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">http_random_index_module</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# ps </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ef</span><span style="color:#D73A49;">|</span><span style="color:#24292E;">grep nginx</span></span>
<span class="line"><span style="color:#24292E;">root       </span><span style="color:#005CC5;">9595</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">15</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">16</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;">        </span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#D73A49;">:0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> nginx: master process .</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">sbin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span></span>
<span class="line"><span style="color:#24292E;">nobody     </span><span style="color:#005CC5;">9755</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">9595</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;">        </span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#D73A49;">:0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> nginx: worker process</span></span>
<span class="line"><span style="color:#24292E;">root      </span><span style="color:#005CC5;">13696</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">9550</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">19</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">35</span><span style="color:#24292E;"> pts</span><span style="color:#D73A49;">/</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> grep </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">color</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">auto nginx</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# kill </span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">9</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">9595</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# kill </span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">9</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">9755</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# ps </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ef</span><span style="color:#D73A49;">|</span><span style="color:#24292E;">grep nginx</span></span>
<span class="line"><span style="color:#24292E;">root      </span><span style="color:#005CC5;">13699</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">9550</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">19</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">35</span><span style="color:#24292E;"> pts</span><span style="color:#D73A49;">/</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">0</span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> grep </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">color</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">auto nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# cp objs</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx ..</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">sbin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span></span>
<span class="line"><span style="color:#24292E;">cp：是否覆盖</span><span style="color:#032F62;">&quot;../nginx/sbin/nginx&quot;</span><span style="color:#24292E;">？ y</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]#</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>如果直接 <code>make &amp;&amp; make install</code> 会直接就没了。</p><p>所以 替换。</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# kill </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13713</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# .</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">configure </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">prefix</span><span style="color:#F97583;">=/</span><span style="color:#E1E4E8;">software</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">with</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">http_stub_status_module </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">with</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">http_random_index_module</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# make</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@Darian1 nginx</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">1.1.4</span><span style="color:#E1E4E8;">]# cp objs</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx ..</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">sbin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">cp：是否覆盖</span><span style="color:#9ECBFF;">&quot;../nginx/sbin/nginx&quot;</span><span style="color:#E1E4E8;">？ y</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# kill </span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">9</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13713</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# .</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">configure </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">prefix</span><span style="color:#D73A49;">=/</span><span style="color:#24292E;">software</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">with</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">http_stub_status_module </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">with</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">http_random_index_module</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# make</span></span>
<span class="line"><span style="color:#24292E;">[root@Darian1 nginx</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">1.1.4</span><span style="color:#24292E;">]# cp objs</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx ..</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">sbin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span></span>
<span class="line"><span style="color:#24292E;">cp：是否覆盖</span><span style="color:#032F62;">&quot;../nginx/sbin/nginx&quot;</span><span style="color:#24292E;">？ y</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></blockquote><h3 id="http-stub-status-module" tabindex="-1">http_stub_status_module <a class="header-anchor" href="#http-stub-status-module" aria-label="Permalink to &quot;http_stub_status_module&quot;">​</a></h3><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">status{</span></span>
<span class="line"><span style="color:#E1E4E8;">    stub_status on;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">status{</span></span>
<span class="line"><span style="color:#24292E;">    stub_status on;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="`+b+`" alt="JavaGuide_Nginx_初步认识_Nginx的内置status.png"></p><ul><li>Active connections:当前状态，活动状态的连接数</li><li>accepts：统计总值，已经接收的客户端请求的总数</li><li>handled：统计总值，已经处理完成的客户端请求的总数</li><li>requests：统计总值，客户端发来的总的请求数</li><li>Reading：当前状态，正在读取客户端请求报文首部的连接的连接数</li><li>Writing：当前状态，正在向客户端发送响应报文过程中的连接数</li><li>Waiting：当前状态，正在等待客户端发出请求的空闲连接数</li></ul><h3 id="http-random-index-module" tabindex="-1">http_random_index_module <a class="header-anchor" href="#http-random-index-module" aria-label="Permalink to &quot;http_random_index_module&quot;">​</a></h3><p>www.darian.com</p><p>随机显示主页</p><p>​ 一般情况下，一个站点默认首页都是定义好的 <code>index.html</code> 、 <code>index.shtml</code> 等等，如果站点下有很多页面想随机展示给用户浏览，那得程序上实现，很麻烦，使用 <code>nginx</code> 的 <code>random index</code> 即可简单实现这个功能，凡是以/结尾的请求，都会随机展示当前目录下的文件作为首页</p><ol><li><p>添加 <code>random_index on</code> 配置，默认是关闭的</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    root html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    random_index on;</span></span>
<span class="line"><span style="color:#E1E4E8;">    index index.html index.htm;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    root html;</span></span>
<span class="line"><span style="color:#24292E;">    random_index on;</span></span>
<span class="line"><span style="color:#24292E;">    index index.html index.htm;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>在 html 目录下创建多个 html 页面</p></li></ol><p>他就会多个 HTML 页面随机地展示在首页。</p><blockquote><p>（ 官方的模块，你可以直接通过 with model 去集成，如果是下载第三方插件可以通过 http model 去集成。 ）</p></blockquote>`,111),u=[d];function m(h,g,C,D,A,x){return n(),a("div",null,u)}const _=s(F,[["render",m]]);export{v as __pageData,_ as default};
